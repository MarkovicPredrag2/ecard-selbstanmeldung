<!DOCTYPE html>
<html>
  <head>
    <!-- ======= Meta Tags ======= -->

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Arztansicht</title>

    <!-- ======= CSS Dependencies ======= -->

    <!-- Bootstrap v3.3.7 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- W3schools CSS -->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <!-- Font awesome v4.7.0 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Wateliste CSS + sonstiges  -->
    <link rel="stylesheet" type="text/css" href="./public/resources/css/style.css" media="screen" />
  </head>
  <body onload="startTime()">
    <!-- ======= Navbar ======= -->

    <nav class="navbar navbar-inverse navbar-static-top" style="position:fixed; width:100%;">
      <div style="font-size: 20px" class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <!-- Home Icon -->
          <a data-toggle="tooltip" title="Home" class="navbar-brand fa fa-home fa-2x" aria-hidden="true" href="#"></a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
          <ul class="nav navbar-nav">
            <!-- User -->
            <!--Template: username p= user-->
            <li><p style="color: orange" class="navbar-text fa fa-user-md fa-2x" aria-hidden="true">&nbsp <span id="user">Hofbauer</span></p></li>
            <!-- Navigation -->
            <li><a href="/public/role/arzt/ansicht/warteraumansicht" style="margin-top: 5%">Warteraumansicht</a></li>
            <li><a href="/public/role/arzt/ansicht/arztansicht" style="margin-top: 7%">Arztansicht</a></li>
            <li><a href="/public/role/arzt/ansicht/logs" style="margin-top: 5%">Logging Historie</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <!-- Time -->
            <li><p id="clock" class="navbar-text" style="margin-top: 15.5%;"></p></li>
            <!-- Logout button -->
            <li data-toggle="tooltip" title="Logout"><a style="color: red; margin-top: 17%;" href="/public/role/logout" class="fa fa-power-off fa-2x" aria-hidden="true"></a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- ======= Mid-Section ======= -->

      <!-- Linke Nav-Bar -->
      <div class="w3-sidebar w3-bar-block w3-black w3-xxlarge" style="width:70px; margin-top:71px;">
        <a href="#" class="w3-bar-item w3-button"><i class="fa fa-check" style="color:#20c40d" title="Patient-Fertig"></i></a>
        <a href="#" class="w3-bar-item w3-button"><i class="fa fa-sign-in" style="color:#20c40d" title="Patient hereinholen"></i></a>
      </div>
      <!-- Patienten-Stammdaten -->
      <div style="margin-left:100px; position:fixed; margin-top:72px">
        <div class="W3-container">
          <h2 id="h_vorname">Hr. Christopher Neuberger</h2>
          <h3 id="h_versicherung">1234567890 - WGKK</h3>
      </div>
        <div class="w3-container">
          <table class="anzeigetable">
            <!-- TO-DO:Richtige Felder zum Anzeigen -->
            <tr>
              <td><label>Vorname:</label></td>
              <td><label id="t_vorname">Christopher</label></td>
              <td><label>SVNR:</label></td>
              <td><label>1234567890</label></td>
            </tr>
            <tr>
              <td><label>Nachname:</label></td>
              <td><label id="t_nachname">Neuberger</label></td>
              <td><label>Adresse:</label></td>
              <td><label>Sattstra√üe 7</label></td>
            </tr>
            <tr>
              <td><label>Grund:</label></td>
              <td><label id="t_grund">Untersuchung</label></td>
            </tr>
          </table>
        </div>
      </div>

      <div align="right" style="padding-top:71px">
        <ul class="list example" id="patientlist">
          <!-- Warteliste -->
          <!--
          for patient in patients
            li.list(onclick='requestPatientData(this)' id= patient.svnr)
              if patient.grundid == 2
                i.fa.fa-stethoscope.fa-5x(aria-hidden='true', style='float:left; margin: 0 15px 0 0;')
              else if patient.grundid == 3
                i.fa.fa-briefcase.fa-4x(aria-hidden='true', style='float:left; margin: 0 15px 0 0;')
              else if patient.grundid == 1
                i.fa.fa-file-text-o.fa-4x(aria-hidden='true', style='float:left; margin: 0 15px 0 0;')
              i.fa.fa-bars.fa-3x(aria-hidden='true', style='float:right; padding-top:27.5px')
              h3(style='text-align: left') #{patient.grund}
              p #{patient.anrede} #{patient.nachname} #{patient.vorname} (#{patient.alter} Jahre alt)
           -->
        </ul>
      </div>

    <!-- ======= JS Dependencies ======= -->

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- Time Script -->
    <script type="text/javascript" src="./public/resources/js/time.js"></script>
    <!-- Sortable Library -->
    <script src="./public/resources/js/jquery-sortable.js"></script>
    <!-- Client to Server Response logic -->
    <script src="./public/resources/js/backend.js" charset="utf-8"></script>
    <!-- SSE Event Receiver script-->
    <script src="./public/resources/js/ssereceiver.js" charset="utf-8"></script>
    <!-- Code to get patient data and rank patients -->
    <script>

      // Rank patients after dropping a list-element
      $(document).ready(function() {
        $("ul.example").sortable({
          onDrop: function ($item, container, _super) {
            $.post("/role/arzt/warteliste", rankPatientBefore($item.attr("id")));
            _super($item, container);
          }
        });
      });

      // Get patient data for a patient.
      function requestPatientData(dom) {
        $.post("/role/arzt/patientdata", { "patient": JSON.stringify(dom.getAttribute('id')) },
          function(data, status) {
            var patient = data[0];
            $("#t_vorname").html(patient.vorname);
            $("#t_nachname").html(patient.nachname);
            $("#t_grund").html(patient.grund);
        });
      }

    </script>
  </body>
</html>
